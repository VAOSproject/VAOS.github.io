<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>VAOS by VAOSproject</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">VAOS</h1>
      <h2 class="project-tagline">VAOS webpage</h2>
    </section>

    <section class="main-content">
      <h1>
<a id="hardware" class="anchor" href="#hardware" aria-hidden="true"><span class="octicon octicon-link"></span></a>Hardware</h1>

<h2>
<a id="components" class="anchor" href="#components" aria-hidden="true"><span class="octicon octicon-link"></span></a>Components</h2>

<ul>
<li>Raspberry pi (At least model B)</li>
<li>SD Card (4GB at least)</li>
<li>USB Wall Charger Adapter(2A recomended)</li>
<li>USB-micro USB cable</li>
<li><a href="http://www.amazon.com/Edimax-EW-7811Un-150Mbps-Raspberry-Supports/dp/B003MTTJOY/ref=sr_1_1?ie=UTF8&amp;qid=1431897205&amp;sr=8-1&amp;keywords=Edimax+EW-7811UN">USB wifi adapter</a></li>
<li><a href="http://www.amazon.com/Virtual-5-1-surround-External-Sound-Card/dp/B000N35A0Y/ref=sr_1_4?ie=UTF8&amp;qid=1431897616&amp;sr=8-4&amp;keywords=usb+sound+card">USB External Sound Card</a></li>
<li>Microphone (jack3.5)</li>
<li><a href="http://www.amazon.com/X-mini-XAM16-GM-B-Portable-Capsule-Speaker/dp/B00GSIKNHS/ref=sr_1_1?ie=UTF8&amp;qid=1431897534&amp;sr=8-1&amp;keywords=x-mini+me">Self Powered Speakers</a></li>
</ul>

<h1>
<a id="software" class="anchor" href="#software" aria-hidden="true"><span class="octicon octicon-link"></span></a>Software</h1>

<h1>
<a id="the-program-itself-its-published-here" class="anchor" href="#the-program-itself-its-published-here" aria-hidden="true"><span class="octicon octicon-link"></span></a>THE PROGRAM ITSELF IT'S PUBLISHED <a href="https://github.com/VAOSproject/client">HERE</a>
</h1>

<h2>
<a id="instalation" class="anchor" href="#instalation" aria-hidden="true"><span class="octicon octicon-link"></span></a>Instalation</h2>

<h3>
<a id="if-you-are-running-it-on-a-raspberry-pi-you-need-to-install-raspbian" class="anchor" href="#if-you-are-running-it-on-a-raspberry-pi-you-need-to-install-raspbian" aria-hidden="true"><span class="octicon octicon-link"></span></a>If you are running it on a raspberry pi, you need to install raspbian</h3>

<p>First of all you must have python 2.7 installed on your computer. To check this type <code>python --version</code> in the terminal. If it is not installed just google how to install it on your linux distro.</p>

<h3>
<a id="python-tools" class="anchor" href="#python-tools" aria-hidden="true"><span class="octicon octicon-link"></span></a>Python tools</h3>

<pre><code>sudo apt-get install python-dev
sudo apt-get install python-setuptools
sudo apt-get install python-pip
sudo pip install --upgrade pip
</code></pre>

<h3>
<a id="required-modules" class="anchor" href="#required-modules" aria-hidden="true"><span class="octicon octicon-link"></span></a>Required modules</h3>

<p>To prevent errors, we're installing all the modules manually instead of using pip.</p>

<p><a href="http://people.csail.mit.edu/hubert/pyaudio/">PyAudio to use the microphone</a></p>

<pre><code>sudo apt-get install git
git clone http://people.csail.mit.edu/hubert/git/pyaudio.git
sudo apt-get install libportaudio0 libportaudio2 libportaudiocpp0 portaudio19-dev
cd pyaudio/
sudo python setup.py install
</code></pre>

<p><a href="http://www.pygame.org/tags/pygame">Pygame for playing sound/music</a></p>

<pre><code>sudo apt-get install python-pygame
</code></pre>

<p><a href="https://pypi.python.org/pypi/wikipedia/">Wikipedia unofficial API</a></p>

<pre><code>git clone https://github.com/goldsmith/Wikipedia.git
cd Wikipedia/
sudo python setup.py install
</code></pre>

<p><a href="https://pypi.python.org/pypi/wolframalpha">Wolframalpha API</a></p>

<pre><code>sudo pip install wolframalpha
</code></pre>

<p><a href="https://github.com/tweepy/tweepy">Tweepy for using twitter</a></p>

<pre><code>git clone https://github.com/tweepy/tweepy.git
cd tweepy
python setup.py install
</code></pre>

<p><a href="https://pypi.python.org/pypi/goslate">Goslate as a translator (google)</a></p>

<pre><code>sudo pip install goslate
</code></pre>

<p><a href="https://github.com/randomchars/pushbullet.py">Pushbullet as Notificacion Service</a></p>

<pre><code>sudo pip install pushbullet.py
</code></pre>

<h3>
<a id="tts" class="anchor" href="#tts" aria-hidden="true"><span class="octicon octicon-link"></span></a>TTS</h3>

<p><strong>Google TTS (Online)</strong>
 For google tts we use a bash script, and we mpg123 and mplayer.</p>

<pre><code>sudo apt-get install mpg123 
sudo apt-get install mplayer
</code></pre>

<p><strong>Pyttsx fork (Offline)</strong></p>

<pre><code>git clone https://github.com/parente/pyttsx.git
cd pyttsx 
sudo python setup.py install
</code></pre>

<p><strong>Festival (Offline)</strong></p>

<pre><code>sudo apt-get install festival festvox-don
</code></pre>

<h3>
<a id="stt" class="anchor" href="#stt" aria-hidden="true"><span class="octicon octicon-link"></span></a>STT</h3>

<p><a href="https://pypi.python.org/pypi/SpeechRecognition/">SpeechRecognition as stt (speech to text)</a></p>

<pre><code>git clone https://github.com/Uberi/speech_recognition.git
cd speech_recognition
sudo python setup.py install
</code></pre>

<p><strong>Flac to use google stt</strong></p>

<pre><code>sudo apt-get install flac
</code></pre>

<h3>
<a id="gpio" class="anchor" href="#gpio" aria-hidden="true"><span class="octicon octicon-link"></span></a>GPIO</h3>

<p><a href="https://pypi.python.org/pypi/RPi.GPIO">RPi.GPIO for using the Button to stop/play music</a></p>

<pre><code>wget https://pypi.python.org/packages/source/R/RPi.GPIO/RPi.GPIO-0.5.11.tar.gz
tar -xzvf RPi.GPIO-0.5.11.tar.gz
cd RPi.GPIO-0.5.11
sudo python setup.py install
</code></pre>

<h2>
<a id="configuration" class="anchor" href="#configuration" aria-hidden="true"><span class="octicon octicon-link"></span></a>Configuration</h2>

<h3>
<a id="usb-sound-card" class="anchor" href="#usb-sound-card" aria-hidden="true"><span class="octicon octicon-link"></span></a>USB Sound Card</h3>

<p>If you´re using a raspberry you´ll need to set up usb sound card:
Connect it to the USB port, and check if it´s recognized:</p>

<pre><code>lsusb
</code></pre>

<p>If you see a <code>Audio Adapter</code> or something like this, it´s fine.
Now we need to set this as the main soundcard, so we open alsa-base.conf</p>

<pre><code>sudo nano /etc/modprobe.d/alsa-base.conf
</code></pre>

<p>Change the following line:</p>

<pre><code>options snd-usb-audio index=-2
</code></pre>

<p>To this:</p>

<pre><code>options snd-usb-audio index=0
options snd_bcm2835 index=1
</code></pre>

<p>Reboot the raspberry <code>sudo reboot</code>
After this, we need to adjust the volume, so open alsamixer:</p>

<pre><code>alsamixer
</code></pre>

<p>Adjust the speaker and mic volume with left/right and up/down keys, press esc, and to save it: </p>

<pre><code>sudo alsactl store
</code></pre>

<p>Next, test that recording and playing audio works well:</p>

<pre><code>arecord temp.wav
</code></pre>

<pre><code>aplay -D hw:1,0 temp.wav
</code></pre>

<p>Once that this works, we can download and setup the program itself.</p>

<h2>
<a id="setup-the-program" class="anchor" href="#setup-the-program" aria-hidden="true"><span class="octicon octicon-link"></span></a>Setup the program</h2>

<p>First of all, open the profile.py file to configure the different options.</p>

<h3>
<a id="name" class="anchor" href="#name" aria-hidden="true"><span class="octicon octicon-link"></span></a>Name</h3>

<p>The name you want it to have, for automatic recognition</p>

<h3>
<a id="tts-1" class="anchor" href="#tts-1" aria-hidden="true"><span class="octicon octicon-link"></span></a>TTS</h3>

<p>You can choose between FESTIVAL, GOOGLE or PYTTSX (You have to write them like this)</p>

<h3>
<a id="auto-recognition---true-or-false" class="anchor" href="#auto-recognition---true-or-false" aria-hidden="true"><span class="octicon octicon-link"></span></a>Auto recognition - True or False.</h3>

<p>If it's False it will only recognize when you are pushing the button, and you won't need to say the name. Otherwise it'll recognize when it hears the name and play a beep sound.</p>

<h3>
<a id="language" class="anchor" href="#language" aria-hidden="true"><span class="octicon octicon-link"></span></a>Language</h3>

<p>Actually it just works on Spanish as you have to translate the modules and the brain. I've given up with this project, but you can fork it and translate it.</p>

<h3>
<a id="wolfram_api" class="anchor" href="#wolfram_api" aria-hidden="true"><span class="octicon octicon-link"></span></a>wolfram_api</h3>

<p>You'll have to get your own API at <a href="http://products.wolframalpha.com/api/">http://products.wolframalpha.com/api/</a> </p>

<h3>
<a id="notification_service---pushbullet-or-pushetta" class="anchor" href="#notification_service---pushbullet-or-pushetta" aria-hidden="true"><span class="octicon octicon-link"></span></a>notification_service - PUSHBULLET or PUSHETTA</h3>

<p>You'll need to get a API for the service you choose. Just google for that.</p>

<h3>
<a id="music" class="anchor" href="#music" aria-hidden="true"><span class="octicon octicon-link"></span></a>Music</h3>

<p>For listening to your music you have to put all your mp3 files at a folder called "music"</p>

<h3>
<a id="calibrate-the-microphone" class="anchor" href="#calibrate-the-microphone" aria-hidden="true"><span class="octicon octicon-link"></span></a>Calibrate the microphone</h3>

<p>Just open intensity.py in the room where VAOS is going to be. The room should be quiet when you open the program. It'll return the average of mic's intensity levels: <code>Average audio intensity is  290.338523211</code>
In this example, we take some more values and if they're similar.</p>

<pre><code>sudo nano stt/auto_recorder.py
Searh for the line wich says THRESHOLD and change it to 310, for example, in this case.
</code></pre>

<p>You have to choose a slightly higher value than the one returned by the script.</p>

      <footer class="site-footer">

        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
      </footer>

    </section>

  
  </body>
</html>

